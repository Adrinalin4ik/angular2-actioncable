!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("actioncable"),require("rxjs/BehaviorSubject")):"function"==typeof define&&define.amd?define(["exports","@angular/core","actioncable","rxjs/BehaviorSubject"],n):n(e["angular2-actioncable"]={},e.ng.core,e.actioncable,e.Rx)}(this,function(e,n,t,o){"use strict";var i=t,c=function(){function e(e){this.url=e,this.baseCable=i.createConsumer(this.url)}return e.prototype.channel=function(e,n){return void 0===n&&(n={}),new r(this,e,n)},e.prototype.disconnect=function(){return this.baseCable.disconnect()},e}(),r=function(){function e(e,n,t){void 0===t&&(t={});var i=this;this.cable=e,this.name=n,this.params=t,this.messages=new o.BehaviorSubject({}),this.onopen=new o.BehaviorSubject({}),this.onclose=new o.BehaviorSubject({}),this.onerror=new o.BehaviorSubject({}),this.onconnected=new o.BehaviorSubject({}),console.warn("NEW");var c=Object.assign({},t,{channel:n});this.baseChannel=this.cable.baseCable.subscriptions.create(c,{received:function(e){i.messages.next(e)},connected:function(e){i.onconnected.next(e)},open:function(e){i.onopen.next(e)},close:function(e){i.onclose.next(e)},error:function(e){i.onerror.next(e)}})}return e.prototype.send=function(e){this.baseChannel.send(e)},e.prototype.unsubscribe=function(){this.cable.baseCable.subscriptions.remove(this.baseChannel)},e}(),s=function(){function e(){this.cables={}}return e.prototype.cable=function(e,n){return this.cables.hasOwnProperty(e)||(this.cables[e]=new c(this.buildUrl(e,n))),this.cables[e]},e.prototype.disconnect=function(e){this.cables.hasOwnProperty(e)&&(this.cables[e].disconnect(),delete this.cables[e])},e.prototype.buildUrl=function(e,n){if(!n)return e;return[e,Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&")].join("?")},e}();s.decorators=[{type:n.Injectable}],s.ctorParameters=function(){return[]},e.Cable=c,e.Channel=r,e.ActionCableService=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular2-actioncable.umd.min.js.map
